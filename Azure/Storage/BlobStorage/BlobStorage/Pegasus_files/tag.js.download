!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));!function(e){var t=e.SkyscannerAnalyticsTag,n=t?e[t]:null;if(n){var o=n.buffer||[],i=n.u;e.SkyscannerAnalyticsTagObject=new r.default(i,o),e[t]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.SkyscannerAnalyticsTagObject.onCall(n)}}else console.log("Unable to find the SkyscannerAnalyticsTag object, make sure you have loaded the tag.js file via guidelines. See http://page for more information.")}(window)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(2)),i=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.default)(),this.clientContext={},this.endpoint=t,this.eventBuffer=r.filter(function(e){return"send"==e[0]&&"register"!=e[1]}).map(function(e){return n._mapArrayToEvent([].concat(u(e)).slice(1))});var a=r.filter(function(e){return"init"==e[0]})[0],s=r.filter(function(e){return"send"==e[0]&&"register"==e[1]})[0];a&&a.length>1&&this._processInit(a),s&&this._processRegistration(s[2]),this.tagManagerDetector=new i.default,this.eventBuffer.length&&this._pushEvents()}return r(e,[{key:"_processInit",value:function(e){this.clientContext.trackingSourceId=e[1],e.length>2&&(this.clientContext.extraParams=e[2])}},{key:"_mapArrayToEvent",value:function(e){return e[0],{evt:e[0],args:e[1]}}},{key:"_callback",value:function(){this.eventBuffer=[]}},{key:"_createPayload",value:function(){return{ctx:this._buildContext(),evnts:this.eventBuffer}}},{key:"_buildContext",value:function(){var e={ts:this.clientContext.trackingSourceId};this.clientContext.extraParams&&(e.p=this.clientContext.extraParams);var t=this.tagManagerDetector.findTagManagers();return t.length>0&&(e.tm=t[0]),e}},{key:"_pushEvents",value:function(){var e=this,t=this._createPayload(),n=this.endpoint+"/collect";if(window.XDomainRequest&&-1==window.navigator.appVersion.indexOf("MSIE 10")){var r=new XDomainRequest;r.onprogress=function(){},r.ontimeout=function(){},r.onerror=function(){},r.open("POST",n,!0),r.onload=function(){e._callback()},setTimeout(function(){r.send(JSON.stringify(t))},0)}else{var o=new XMLHttpRequest;o.open("POST",n,!0),o.withCredentials=!0,o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4==o.readyState&&201==o.status&&e._callback()},o.send(JSON.stringify(t))}}},{key:"_processRegistration",value:function(e){var t=(new Date).getTime(),n={websiteId:e.websiteId,redirectId:e.redirectId,r:t},r=this._buildQueryString(n),o=this.endpoint+"/register?"+r,i=document.createElement("img");i.src=o,i.style.display="none",document.body.appendChild(i)}},{key:"_buildQueryString",value:function(e){return Object.keys(e).filter(function(t){return void 0!==e[t]}).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}},{key:"onCall",value:function(e){e&&0!=e.length&&("init"==(e=[].concat(u(e)))[0]?this._processInit(e):"send"==e[0]&&("register"==e[1]?this._processRegistration(e[2]):(this.eventBuffer.push(this._mapArrayToEvent(e.slice(1))),this._pushEvents())))}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(){Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);if(isNaN(t))return 0;if(0===t||!isFinite(t))return t;return(t>0?1:-1)*Math.floor(Math.abs(t))}(e);return Math.min(Math.max(t,0),n)};return function(e){var n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o=arguments.length>1?arguments[1]:void 0,i=void 0;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var a=r(n.length),u=t(this)?Object(new this(a)):new Array(a),s=0,c=void 0;s<a;)c=n[s],u[s]=o?void 0===i?o(c,s):o.call(i,c,s):c,s+=1;return u.length=a,u}}());Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=n.length;return function(i){if("function"!=typeof i&&("object"!==(void 0===i?"undefined":r(i))||null===i))throw new TypeError("Object.keys called on non-object");var a,u,s=[];for(a in i)e.call(i,a)&&s.push(a);if(t)for(u=0;u<o;u++)e.call(i,n[u])&&s.push(n[u]);return s}}())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t)throw new Error("window needs to be passed in.");if(void 0===n)throw new Error("document needs to be passed in.");this.window=t,this.document=n}return r(e,[{key:"findTagManagers",value:function(){var e=[];return this.window.google_tag_manager&&e.push("GTM"),this.window.TAGMAN&&e.push("TagMan"),this.window.ensBootstraps&&e.push("Ensighten"),this.window.Skyscanner&&this.window.Skyscanner.tags&&this.window.utag_data&&e.push("Skyscanner"),e}}]),e}();t.default=o}]);